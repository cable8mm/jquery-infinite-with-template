!function(e){e.fn.infiniteTemplate=function(t){var n=e(this);if(!n.length)return n;var i=e.extend({},e.fn.infiniteTemplate.defaults,t),a=0,l=!1;function r(){if(!l){l=!0;var t=e.templates(i.templateSelector),r=i.query?"&"+i.query:"";e.get(i.dataPath+"?page="+a+r,function(i){i&&(e.each(i.data,function(i,a){var l=t.render(a);e(l).appendTo(n)}),a+=1),l=!1})}}return e(window).on("scroll",function(){e(this).scrollTop()>e(document.body).height()-2*e(this).height()&&r()}),r(),this},e.fn.infiniteTemplate.defaults={dataPath:null,templateSelector:null,query:null}}(jQuery);