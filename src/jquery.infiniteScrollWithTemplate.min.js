!function(e){e.fn.infiniteTemplate=function(t){var n=e(this);if(!n.length)return n;var a=e.extend({},e.fn.infiniteTemplate.defaults,t);console.log(a);var i=0,l=!1;function o(){if(!l){l=!0;var t=e.templates(a.templateSelector),o=a.query?"&"+a.query:"";e.get(a.dataPath+"?page="+i+o,function(a){a&&e.each(a.data,function(a,i){var l=t.render(i);e(l).appendTo(n)}),i+=1,l=!1})}}return e(window).on("scroll",function(){e(this).scrollTop()>e(document.body).height()-2*e(this).height()&&o()}),o(),this},e.fn.infiniteTemplate.defaults={dataPath:null,templateSelector:null,query:null}}(jQuery);